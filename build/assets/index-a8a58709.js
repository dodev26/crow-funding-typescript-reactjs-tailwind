import{_ as C,t as S,u as L,j as e,H as T,B as h,b as g,S as J,e as K,I as X,f as Z,r as u,a as ee,h as ae,i as F,k as p,c as se,d as A,l as te,Q as x,F as I,m as R,n as le,o as re,P as ne,A as ie}from"./index-895e883f.js";import{P as ce}from"./PageTitle-be8333d4.js";import{C as oe,a as de,B as me,S as xe}from"./CampaignPerk-6a848d2b.js";import{N as pe,C as ue,a as he,b as fe,c as ge,d as B,e as y}from"./NotFound-6f8913cf.js";import{C as je}from"./CampaignGrid-441529a9.js";import"./Label-29ac64f5.js";import"./index-93a93a38.js";const M={heading:()=>C(S.thanksModal.heading),subheading:()=>C(S.thanksModal.subheading),shareThisCampaign:()=>C(S.thanksModal.shareThisCampaign)},we=()=>{const{t:s}=L();return e.jsx("div",{className:"w-full md:w-[570px] rounded-xl dark:bg-darkSecondary py-4 px-6 md:p-10",children:e.jsxs("div",{className:"w-full mx-auto max-w-[434px]",children:[e.jsx("div",{className:"w-[60px] mx-auto h-[60px] animate-pulse text-primary bg-primary/10 flex items-center justify-center rounded-full overflow-hidden",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-[37px] h-[37px]",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),e.jsx(T,{className:"text-center mt-[15px] md:mt-5 text-text1 text-base md:text-[22px] font-semibold",children:s(M.heading())}),e.jsx("p",{className:"md:text-sm mt-[10px] md:mt-5 text-xs text-text3 text-center",children:s(M.subheading())}),e.jsx(h,{href:"/",type:"button",className:"w-full max-w-[370px] text-base mx-auto mt-[25px]",kind:"secondary",children:s(M.shareThisCampaign())})]})})},be=({className:s="",classNameSkeleton:l="",isLoading:i=!1,onClick:m,onMouseEnter:c,images:n=[],onMouseLeave:j})=>{const a=g("campaign-carousel transition-all w-full relative h-[90px] max-w-full lg:max-w-[416px] mx-auto lg:overflow-x-hidden lg:hover:overflow-x-scroll overflow-x-scroll",s),f=g("flex  w-full h-full absolute justify-start gap-x-4  md:gap-x-5 pb-4 flex-nowrap"),w=g("w-[89px] flex-shrink-0 overflow-hidden  rounded-lg border-transparent border-2  h-[70px]   transition-all",l);if(i)return e.jsx(Ne,{wrapperStyles:a,containerStyles:f,classNameSkeleton:w});const b=r=>{m&&m(r)};return e.jsx("div",{className:a,children:e.jsx("div",{className:f,children:n.map(r=>e.jsx("div",{"data-url":r,onMouseEnter:c,onMouseLeave:j,onClick:()=>b(r),className:`bg-white dark:bg-darkSoft ${w}`,children:e.jsx("img",{loading:"lazy",src:r,alt:r,className:"block w-full h-full max-w-full rounded-lg object-fill  cursor-pointer"})},r))})})},Ne=({wrapperStyles:s,containerStyles:l,classNameSkeleton:i})=>e.jsx("div",{className:s,children:e.jsx("div",{className:l,children:Array(4).fill(0).map((m,c)=>e.jsx(J,{classNameSkeleton:i},c))})}),ye=()=>{const{control:s}=K();return e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-5 dark:text-white",children:"Support"}),e.jsxs("form",{className:"w-full bg-white shadow py-7 px-6 dark:bg-darkSecondary flex flex-col justify-center  rounded-lg",children:[e.jsx("p",{className:"text-xl text-center  mb-8 text-text3",children:"Pledge without reward"}),e.jsx(X,{hideError:!0,type:"text",name:"sp",control:s,placeholder:"$10",classInputWrapper:"mb-5",className:"w-full px-5 py-3 text-lg font-medium border rounded border-strock"}),e.jsxs("div",{className:"p-5  rounded-xl text-sm bg-grayf3 dark:bg-darkbg mb-5",children:[e.jsx("p",{className:" text-text2 dark:text-white font-semibold mb-5",children:"Back it because you believe in it."}),e.jsx("p",{className:"max-w-[331px] dark:text-text3 text-text3",children:"Support the project for no reward, just because it speaks to you."})]}),e.jsx(h,{kind:"secondary",className:"w-full",children:"Continue"})]})]})},ke=[{title:"Campaign"},{title:"Risks"},{title:"FAQ"},{title:"Updates"},{title:"Comments"}],ve=()=>{const{openModal:s}=Z(),[l,i]=u.useState({amount_prefilled:0,campaign_end_method:"",category:"",country:"",createdAt:new Date,end_date:new Date,goal:0,images:[],raised_amount:0,slug:"",sort_description:"",start_date:new Date,story:"",title:"",updatedAt:new Date,video_url:"",author:"",avatar:"",idAuthor:""}),[m,c]=u.useState(!1),{user:n}=ee(t=>t.auth),j=ae(),[a,f]=u.useState(!1),[w,b]=u.useState(""),{slug:r}=F(),N=r==null?void 0:r.split("-")[(r==null?void 0:r.split("-").length)-1],{category:P,country:$,author:E,avatar:z,images:D,sort_description:H,story:V,title:_}=l,k=Array.from(D)[0],Y=Array.from(D).slice(1);u.useEffect(()=>{k&&b(k)},[k]);const v=()=>s(e.jsx(me,{onSubmit:U})),G=async()=>{try{const t=R(A,"campaigns",`${N}`);await re(t),x.success("Remove campaign successfully"),j(ne.home)}catch(t){t instanceof I&&x.error(t.message),x.error("Remove campaign failed")}},O=async()=>{(await xe.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",confirmButtonText:"Yes, remove it!",showCancelButton:!0,cancelButtonText:"No, cancel!"})).isConfirmed&&await G()},U=async t=>{const o={idAuthor:l.idAuthor,createdAt:new Date,updatedAt:new Date,idCampaign:l.id,amount:t};try{const d=se(A,"backed");await te(d,o),x.success("Backed successfully"),s(e.jsx(we,{}))}catch(d){d instanceof I&&x.error(d.message),x.error("Backed failed")}},Q=(n==null?void 0:n.uid)===l.idAuthor,W=t=>{b(t)},q=async t=>{f(!0);try{const o=R(A,"campaigns",`${t}`),d=await le(o);d.exists()?i({...d.data(),id:d.id}):c(!0)}catch{x.error("fetch campaign's data failed"),c(!0)}finally{f(!1)}};return u.useEffect(()=>{q(N)},[N]),!a&&m?e.jsx(pe,{message:"Campaign Not Found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:h-[140px] h-[119px] rounded-3xl bg-cover bg-no-repeat bg-center gradient-banner flex items-center justify-center text-white text-xl  md:text-[40px] font-bold",style:{backgroundImage:"url(https://images.unsplash.com/photo-1688809957913-0ecfb2d32dc5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80)"},children:"Education"}),e.jsxs("div",{className:"flex flex-col md:flex-row  items-start gap-x-10 w-full max-w-[1066px] mt-10",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(ue,{isLoading:a,imageUrl:w,imageAlt:"img",className:"h-[210px] w-full md:h-[398px] mb-[30px] overflow-hidden rounded-2xl"}),e.jsx(be,{onClick:W,isLoading:a,images:Y})]}),e.jsxs("div",{className:"flex-1 md:max-w-[443px] max-w-full mt-4 md:mt-0",children:[e.jsx(he,{isLoading:a,classNameSkeleton:"w-2/4 h-[20px]",nameCategory:P,pathCategory:"/",className:"mb-4 text-sm"}),e.jsx(oe,{title:_,classNameSkeleton:"h-[28px] w-full",isLoading:a,className:"font-bold mb-4 text-xl line-clamp-2",children:_}),e.jsxs(fe,{isLoading:a,classNameSkeleton:"flex flex-col gap-y-1",className:"mb-6 text-sm line-clamp-2 leading-5",children:[H," "]}),e.jsx(Ce,{isLoading:a,author:E,amountCampaigns:"1",avatar:z,country:$}),e.jsx(ge,{isLoading:a,className:"h-1",classNameSkeleton:"h-full"}),e.jsxs("div",{className:"flex items-start gap-x-5 justify-between",children:[e.jsx(B,{isLoading:a,amount:`$${l.goal}`,text:`Raised of $${l.goal}`,size:"big"}),e.jsx(B,{isLoading:a,amount:"173",text:"Total backers",size:"big"}),e.jsx(B,{isLoading:a,amount:"30",text:"Days left",size:"big"})]}),a?e.jsx(p,{className:"w-full min-h-[56px] rounded-xl mt-4"}):e.jsxs(e.Fragment,{children:[e.jsx(h,{onClick:v,disabled:a,kind:"primary",type:"button",className:"w-full mt-4",children:"Back this project"}),Q&&e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(h,{href:`/campaign/edit/${N}`,onClick:v,disabled:a,kind:"secondary",type:"button",className:"w-full basis-[70%] mt-4",children:"Edit campaign"}),e.jsx(h,{onClick:O,disabled:a,kind:"danger",type:"button",className:"w-full basis-[30%]  mt-4",children:"remove"})]})]})]})]}),e.jsx("div",{className:g("flex items-center justify-center w-full mt-[30px] md:mt-[60px] dark:bg-darkSecondary bg-white p-0 border-b border-b-slate-200 dark:border-none",{"p-5":!a}),children:a?e.jsx(p,{className:"w-full h-[96px]",classNameSkeleton:"rounded-none"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between md:justify-stretch  flex-1 md:gap-x-[40px] lg:gap-x-[60px] text-xs md:text-sm font-medium text-text3",children:ke.map((t,o)=>e.jsx("span",{className:"cursor-pointer first:text-secondary",children:t.title},o))}),e.jsx(h,{onClick:v,className:"hidden md:inline-block",kind:"primary",children:"Back this project"})]})}),e.jsxs("div",{className:"grid md:gap-x-[40px] xl:gap-x-[124px] md:grid-cols-[1.3fr,1fr] mt-[35px] max-w-[1170px] mx-auto",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg dark:text-white font-semibold uppercase mb-5",children:"STORY"}),e.jsx("div",{className:"bg-white lg:px-4 dark:bg-darkSecondary dark:text-text3  w-full",dangerouslySetInnerHTML:{__html:V}})]}),e.jsxs("div",{className:"mt-10 md:mt-0",children:[e.jsx(ye,{}),e.jsx("div",{className:"mb-[60px]"}),e.jsx("div",{className:"flex flex-col gap-y-[30px]",children:Array(3).fill(0).map((t,o)=>e.jsx(de,{},o))})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsx(T,{as:"h2",className:"mb-10 text-xl dark: font-semibold dark:text-white",children:"You also may be interested in"}),e.jsxs(je,{children:[e.jsx(y,{}),e.jsx(y,{}),e.jsx(y,{}),e.jsx(y,{})]})]})]})},Ce=({amountCampaigns:s="",author:l="",country:i="",avatar:m="",className:c,isLoading:n})=>e.jsxs("div",{className:g("flex items-center gap-x-5 mb-9",c),children:[e.jsx(ie,{src:m,isLoading:n,alt:l,className:"w-[60px] h-[60px] rounded-full",classNameSkeleton:"rounded-full"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx("h3",{className:"text-text1 dark:text-white text-lg font-medium",children:n?e.jsx(p,{className:"w-20 h-3  mb-1"}):l}),e.jsx("div",{className:"flex items-center ",children:n?e.jsx(p,{className:"w-20 mb-1 h-3"}):Array(5).fill(0).map((j,a)=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4 text-yellow-500",children:e.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})},a))})]}),e.jsxs("div",{className:"flex items-center gap-x-3 text-text3 text-sm",children:[e.jsx("strong",{className:"text-primary",children:n?e.jsx(p,{className:"w-20 h-3 mb-1"}):`${s} Campaign`}),n?e.jsx(p,{className:"w-[6px] h-[6px] rounded-full"}):e.jsx("span",{className:"block w-[6px] h-[6px] rounded-full bg-text3"}),e.jsx("span",{children:n?e.jsx(p,{className:"w-16 h-3"}):i})]})]})]}),Re=()=>{const{slug:s}=F(),l=(s==null?void 0:s.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "))||"";return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:l}),e.jsx(ve,{})]})};export{Re as CampaignDetailPage};
