import{j as a,r as n,_ as p,t as g,u as y,a as b,H as h,P as w,c as N,d as D,q as S,w as A,g as P,Q as v}from"./index-895e883f.js";import{C as _}from"./CampaignPerk-6a848d2b.js";import{C as q,a as H,b as M,c as T,d as x,N as $,e as k}from"./NotFound-6f8913cf.js";import{C as E}from"./CampaignGrid-441529a9.js";import{P as G}from"./PageTitle-be8333d4.js";import{v as z}from"./v4-a960c1f4.js";import"./Label-29ac64f5.js";import"./index-93a93a38.js";const F=()=>a.jsx("div",{className:"mb-8"}),I=({image:r="",category:o="",isLoading:s,sortDesc:i="",title:t="",href:l="/"})=>{const[f,e]=n.useState(0);return n.useEffect(()=>{setTimeout(()=>{const c=Math.floor(Math.random()*100);e(c)},1e3)},[]),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-y-[22.5px] lg:gap-y-0 items-center gap-x-[30px] w-full max-w-[1048px]",children:[a.jsx(q,{isLoading:s,imageUrl:r||"https://plus.unsplash.com/premium_photo-1675756583672-04a27dfe1f64?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80'",imageAlt:"image of"+t,className:"h-[266px] flex-1  rounded-2xl overflow-hidden"}),a.jsxs("div",{className:"flex-1 max-w-[435px]",children:[a.jsx(H,{classNameSkeleton:"w-2/4 h-[20px]",isLoading:s,nameCategory:o,pathCategory:"/",className:"mb-4 text-sm"}),a.jsx(_,{classNameSkeleton:"h-[28px] w-full",isLoading:s,href:l,className:"font-bold mb-4 text-xl line-clamp-2",children:t}),a.jsx(M,{classNameSkeleton:"flex flex-col gap-y-1",isLoading:s,className:"mb-6 text-sm line-clamp-3",children:i}),a.jsx(T,{isLoading:s}),a.jsxs("div",{className:"flex items-start gap-x-5 justify-between",children:[a.jsx(x,{isLoading:s,amount:"$2,000",text:"Raised of $2,500",size:"big"}),a.jsx(x,{isLoading:s,amount:"173",text:"Total backers",size:"big"}),a.jsx(x,{isLoading:s,amount:"30",text:"Days left",size:"big"})]})]})]})},u={popularCampaign:()=>p(g.dashboard.popularCampaign),yourCampaign:()=>p(g.dashboard.yourCampaign),notCampaign:()=>p(g.dashboard.notCampaign)},O=()=>{const{t:r}=y(),{user:o}=b(m=>m.auth),[s,i]=n.useState(!1),[t,l]=n.useState([]),f=t.length||0,e=t[t.length-1]||{category:"",title:"",sort_description:"",images:[]},c=async()=>{i(!0);try{const m=N(D,"campaigns"),C=S(m,A("idAuthor","==",o==null?void 0:o.uid)),j=(await P(C)).docs.map(d=>({...d.data(),id:d.id}));l(j)}catch{v.error("error fetch your campaign")}finally{i(!1)}};return n.useEffect(()=>{c()},[]),a.jsxs(a.Fragment,{children:[a.jsx(G,{children:"Dashboard"}),a.jsx(h,{isLoading:s,as:"h2",number:f,children:r(u.yourCampaign())}),!s&&t.length===0?a.jsx($,{message:r(u.notCampaign())}):a.jsx(I,{isLoading:s,href:`${w.campaign}/${e.slug}-${e.id}`,category:e.category,title:e.title,sortDesc:e.sort_description,image:Array.from(e.images)[0]}),a.jsx(F,{}),a.jsx(h,{isLoading:s,as:"h2",children:r(u.popularCampaign())}),a.jsx(E,{className:"grid-cols-1 sm:grid-cols-2",children:Array(4).fill(0).map(m=>a.jsx(k,{isLoading:s},z()))})]})};export{O as DashboardPage};
